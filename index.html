<!DOCTYPE html>
<html>
    <head>
        <title>Rock Paper Scissors</title> 
    </head>
    <body>
        <main>
            <h1>Rock Paper Scissors</h1>
            <div id="game">
                <p>Lets play a game!</p>
                <p>What is your move?</p>
                <button id="rock">Rock</button>
                <button id="paper">Paper</button>
                <button id="scissors">Scissors</button>
            </div>
            <div id="outcome">

            </div>
        </main>
        <script>  
        
            let computerScore = 0; 
            let playerScore = 0; 
            let currentWinner= "No one";

            function getComputerSelection(){ 
                let computerOptions = ['Rock', 'Paper', 'Scissors'];
                let selectedIndex = Math.floor(Math.random() * computerOptions.length);
                return computerOptions[selectedIndex];
            }
            
            function playRound(playerSelection, computerSelection){ 
                if (playerSelection===computerSelection){
                    playerScore+=1;
                    computerScore+=1;
                    return 'It\'s a draw! You both chose ' + computerSelection + '.';
                } else if ((playerSelection === 'Rock' && computerSelection==='Scissors')|| (playerSelection=== 'Scissors' && computerSelection==='Paper') || (playerSelection === 'Paper' && computerSelection==='Rock')){
                    playerScore+=1;
                    return 'You win! ' + playerSelection + ' beats ' + computerSelection + '.';
                } else {
                    computerScore+=1;
                    return 'You lose! ' + computerSelection + ' beats ' + playerSelection + '.';
                }
            }

            function assessWinner(computerScore, playerScore){ 
                if (computerScore>playerScore){
                    return 'Computer';
                } else if (playerScore > computerScore){
                    return 'Player';
                } else {
                    return 'No one';
                }
            }
            let playerSelection = "";
            let output=document.getElementById('outcome');
            let para = document.createElement('p');
            
            // there should be a way to simplify this into a single function...
            let rock = document.getElementById('rock');
            rock.onclick = function(){
                updateOutput("Rock");
            };

            let paper = document.getElementById('paper');
            paper.onclick = function(){
                updateOutput("Paper");
            };

            let scissors = document.getElementById('scissors');
            scissors.onclick = function(){
                updateOutput("Scissors");
            };

            function updateOutput(PlayerSelection){
                para.innerHTML+=playRound(PlayerSelection, getComputerSelection());
                currentWinner = assessWinner(computerScore, playerScore);
                para.innerHTML += "<br>" + 'Player: ' + playerScore + '; Computer: ' + computerScore + '.' + currentWinner + ' is winning.' + "<br>";
                output.appendChild(para);
            }
                
        </script>
    </body>
</html>